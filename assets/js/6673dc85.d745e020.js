"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9615],{9453:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var i=t(5037),r=t(4848),a=t(8453);const o={slug:"CookieCutterML",title:"Cookie ML",authors:["rakesh"],tags:["ML"]},s="Introduction",c={authorsImageUrls:[void 0]},l=[{value:"YAML",id:"yaml",level:2},{value:"Argparse",id:"argparse",level:2},{value:"File and Directories",id:"file-and-directories",level:2},{value:"Virtual env",id:"virtual-env",level:2},{value:"Help",id:"help",level:2},{value:"Final step",id:"final-step",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"I go by one simple principle"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"If you repeat the same steps twice, then automate it the third time."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Couple of years back, I wrote blog on how to :"}),"\n",(0,r.jsxs)(n.p,{children:["1> Structure your Data Science and ML project - ",(0,r.jsx)(n.a,{href:"https://rvbug.hashnode.dev/structuring-data-science-and-ml-projects",children:"Link here"})]}),"\n",(0,r.jsxs)(n.p,{children:["2> Automating ML structure using ",(0,r.jsx)(n.code,{children:"Make"})," and a simple ",(0,r.jsx)(n.code,{children:"Python Script"})," - ",(0,r.jsx)(n.a,{href:"https://rvbug.hashnode.dev/ml-cookie-cutter",children:"Link here"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["In this follow-up article, I will provide an update to the cookie-cutter project which now uses ",(0,r.jsx)(n.code,{children:"yaml"})," making it far more flexible and easy to use."]}),"\n",(0,r.jsx)(n.h1,{id:"project-structure",children:"Project Structure"}),"\n",(0,r.jsx)(n.p,{children:"Here's the structure I use for all my ML projects."}),"\n",(0,r.jsx)(n.p,{children:"You can create a different one but these are pretty standard for most of the projects."}),"\n",(0,r.jsxs)(n.p,{children:["![](",(0,r.jsx)(n.a,{href:"https://private-user-images.githubusercontent.com/10928536/294880896-e0785d48-c21b-42c6-84a7-de211e6687ca.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTI5ODQxNTAsIm5iZiI6MTcxMjk4Mzg1MCwicGF0aCI6Ii8xMDkyODUzNi8yOTQ4ODA4OTYtZTA3ODVkNDgtYzIxYi00MmM2LTg0YTctZGUyMTFlNjY4N2NhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MTMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDEzVDA0NTA1MFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWUxOGU3OTMxMjIzMjJmN2UyMWRiMzBmNDI2YWMwYWQ0ZWU1NGM4YzY0OWQ1ZjY1ZmFjNzNlYzZlOWM3MjgxOGYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.usv2boxCTmYm2_bIrPdwqCONB49vgPjyGkoY2RUN3CE",children:"https://private-user-images.githubusercontent.com/10928536/294880896-e0785d48-c21b-42c6-84a7-de211e6687ca.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTI5ODQxNTAsIm5iZiI6MTcxMjk4Mzg1MCwicGF0aCI6Ii8xMDkyODUzNi8yOTQ4ODA4OTYtZTA3ODVkNDgtYzIxYi00MmM2LTg0YTctZGUyMTFlNjY4N2NhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MTMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDEzVDA0NTA1MFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWUxOGU3OTMxMjIzMjJmN2UyMWRiMzBmNDI2YWMwYWQ0ZWU1NGM4YzY0OWQ1ZjY1ZmFjNzNlYzZlOWM3MjgxOGYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.usv2boxCTmYm2_bIrPdwqCONB49vgPjyGkoY2RUN3CE"}),' align="left")']}),"\n",(0,r.jsx)(n.h2,{id:"yaml",children:"YAML"}),"\n",(0,r.jsxs)(n.p,{children:["YAML is ",(0,r.jsx)(n.strong,{children:"a text based data serialization language for managing your configuration files"}),". YAML stands for ",(0,r.jsx)(n.code,{children:"Yet Another Markup Language"})," or ",(0,r.jsx)(n.code,{children:"YAML ain't markup language"}),". You can read more about it ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/YAML",children:"here"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Here's the YAML format used in my project."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"  # support for data version control\n  - .dvc:\n\n  # if you plan to use docker container\n  - docker:\n    - Dockerfile\n\n  # basic ML development files\n  - src:\n    - __init__.py\n    - data_pipeline.py\n    - data_processing.py\n\n  ####\n"})}),"\n",(0,r.jsx)(n.h1,{id:"script",children:"Script"}),"\n",(0,r.jsxs)(n.p,{children:["One of the main pre-requisites for this script is ",(0,r.jsx)(n.code,{children:"pyyaml"}),". You can find the documentation ",(0,r.jsx)(n.a,{href:"https://pyyaml.org/wiki/PyYAMLDocumentation",children:"here"}),". Install them via ",(0,r.jsx)(n.a,{href:"https://pip.pypa.io/en/stable/",children:"pip"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"argparse",children:"Argparse"}),"\n",(0,r.jsx)(n.p,{children:"Everything starts with the main function. It uses argparse to parse command line arguments provided to the script. It then loads the yaml config file."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# parse the arguments provided on the command line\nargs = parse_args()\n\n# Load yaml config\nconfig = load_config()\n"})}),"\n",(0,r.jsx)(n.p,{children:"The parser will look for specific flags and take action. More about that in the Help section below."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'parser.add_argument("--n", "--name", #...)\nparser.add_argument("--p", "--path",  #...) \nparser.add_argument("--c", "--config",  #...)\nparser.add_argument("--v", "--venv",  #...)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"file-and-directories",children:"File and Directories"}),"\n",(0,r.jsxs)(n.p,{children:["Based on how YAML is structured, the script will create files, directories and sub-directories via a function ",(0,r.jsx)(n.code,{children:"create_directories"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def create_directories(project_path, config):\n\nif isinstance(config, str):\n        item_path = os.path.join(project_path, config)\n        with open(item_path, "w"):\n            pass  # empty file\n\n#...\n'})}),"\n",(0,r.jsx)(n.h2,{id:"virtual-env",children:"Virtual env"}),"\n",(0,r.jsxs)(n.p,{children:["If you provide flag to create a ",(0,r.jsx)(n.a,{href:"https://docs.python.org/3/library/venv.html",children:"virtual environment"}),", the script will create one for you. There is a function called ",(0,r.jsx)(n.code,{children:"create_virtual_env"})," to do exactly that."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def create_virtual_env(project_path, activate=True):\n#...\nif not os.path.exists(venv_path):\n        venv.create(venv_path, with_pip=True)\n#...\n"})}),"\n",(0,r.jsx)(n.h2,{id:"help",children:"Help"}),"\n",(0,r.jsxs)(n.p,{children:["When you use ",(0,r.jsx)(n.code,{children:"-h"})," flag, it will show you how to use the script."]}),"\n",(0,r.jsxs)(n.p,{children:["If you want to give a specific name to your project use ",(0,r.jsx)(n.code,{children:"--n or N"})," flag. If not, it will create a default directory called ",(0,r.jsx)(n.code,{children:"ml-cookie-cutter."})]}),"\n",(0,r.jsxs)(n.p,{children:["Specify the path where the project needs to be created using ",(0,r.jsx)(n.code,{children:"--p or P"})," flag."]}),"\n",(0,r.jsxs)(n.p,{children:["Finally, if you want the script to create a virtual environment for you, go ahead and use the ",(0,r.jsx)(n.code,{children:"--v or --venv"})," flag. By default, the name of the environment is ",(0,r.jsx)(n.code,{children:"venv"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\n$> python3 main.py --h\n\n# usage: ML Cookie Cutter [-h] [--n N] [--p P] [--c C] [--v]\n\n# Creates ML project cookie cutter structure\n\n#optional arguments:\n#  -h, --help       show this help message and exit\n#  --n N, --name N  Name of the directory to be created, default = ml-cookie-cutter\n#  --p P, --path P    provide the path where, default is $HOME dir\n#  --v, --venv        create a virtual env. [ignore if you are already on a virtual env]\n\n# Enjoy and happy coding\n"})}),"\n",(0,r.jsx)(n.h2,{id:"final-step",children:"Final step"}),"\n",(0,r.jsx)(n.p,{children:"Once you have the virtual environment set up, you can activate it as shown below. You should see that it in your command prompt; go ahead and start installing all your Data science and ML libraries."}),"\n",(0,r.jsxs)(n.p,{children:["For deactivating simply type ",(0,r.jsx)(n.code,{children:"deactivate"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# go to the project folder\n$> cd ml-cookie-cutter\n# activate the environment \n$> source venv/bin/activate \n\n# venv is activated \n(venv) $> pip install numpy pandas pytorch seaborn notebook\n\n# To deactive use the following command\n(venv) $> deactivate\n$>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["On windows if you use PowerShell activate using ",(0,r.jsx)(n.code,{children:"Activate.ps1"})]}),"\n",(0,r.jsx)(n.h1,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"This article shows how you can use this cookie-cutter project and create a ML structure with a simple command-line tool. Enjoy and have fun learning!"}),"\n",(0,r.jsx)(n.p,{children:"This is how I have used the cookie-cutter project to create a ML structure with a simple command-line tool. Enjoy and have fun learning!"}),"\n",(0,r.jsx)(n.p,{children:"Happy coding!"}),"\n",(0,r.jsx)(n.h1,{id:"references",children:"References"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/rvbug/cookie-ml/",children:"Github - Complete Code"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://pypi.org/project/PyYAML/",children:"Pyyaml Documentation"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.python.org/",children:"Installing Python"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://pip.pypa.io/en/stable/",children:"PIP Installation"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://rvbug.hashnode.dev/ml-cookie-cutter",children:"How to structure your ML projects"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://rvbug.hashnode.dev/structuring-data-science-and-ml-projects",children:"Automating ML structure (v 1.0)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.python.org/3/library/venv.html",children:"Documentation on Virtual Env"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},5037:e=>{e.exports=JSON.parse('{"permalink":"/notes/blog/CookieCutterML","source":"@site/blog/2024-04-21/cookiecutterv2.0.md","title":"Cookie ML","description":"I go by one simple principle","date":"2024-04-21T00:00:00.000Z","tags":[{"inline":false,"label":"ML","permalink":"/notes/blog/tags/ML","description":"Machine Learning"}],"readingTime":3.645,"hasTruncateMarker":true,"authors":[{"name":"rakesh","title":"Sr. Engineering Manager","url":"https://qubitai.in","page":{"permalink":"/notes/blog/authors/rakesh"},"socials":{"w":"https://qubitai.in","github":"https://github.com/rvbug"},"imageURL":"https://avatars.githubusercontent.com/u/10928536?v=4","key":"rakesh"}],"frontMatter":{"slug":"CookieCutterML","title":"Cookie ML","authors":["rakesh"],"tags":["ML"]},"unlisted":false,"prevItem":{"title":"Quantum Machine Learning","permalink":"/notes/blog/QuantumML"},"nextItem":{"title":"Quantum Gravity - Intestellar","permalink":"/notes/blog/QuantumGravity"}}')}}]);